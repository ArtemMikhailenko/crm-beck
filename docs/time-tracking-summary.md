# –ú–æ–¥—É–ª—å —É—á—ë—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ (Time Tracking) - –°–≤–æ–¥–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üéØ –û–±—â–∏–π –æ–±–∑–æ—Ä

–ú–æ–¥—É–ª—å —É—á—ë—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—á–∏–º –≤—Ä–µ–º–µ–Ω–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –≤–∫–ª—é—á–∞—è:
- ‚úÖ –ó–∞–ø–∏—Å–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ç–∞–π–º–µ—Ä
- ‚úÖ –¢–∞–±–µ–ª–∏ —É—á—ë—Ç–∞ —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –û—Ç—á—ë—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è–º–∏ –∏ —Å—Ç–∞–≤–∫–∞–º–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
src/time-tracking/
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ time-entry.dto.ts      # DTO –¥–ª—è –∑–∞–ø–∏—Å–µ–π –≤—Ä–µ–º–µ–Ω–∏
‚îÇ   ‚îú‚îÄ‚îÄ timer.dto.ts           # DTO –¥–ª—è —Ç–∞–π–º–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ timesheet.dto.ts       # DTO –¥–ª—è —Ç–∞–±–µ–ª–µ–π –∏ –æ—Ç—á—ë—Ç–æ–≤
‚îú‚îÄ‚îÄ time-entries.service.ts    # –°–µ—Ä–≤–∏—Å –∑–∞–ø–∏—Å–µ–π –≤—Ä–µ–º–µ–Ω–∏
‚îú‚îÄ‚îÄ timer.service.ts           # –°–µ—Ä–≤–∏—Å —Ç–∞–π–º–µ—Ä–∞
‚îú‚îÄ‚îÄ timesheets.service.ts      # –°–µ—Ä–≤–∏—Å —Ç–∞–±–µ–ª–µ–π
‚îú‚îÄ‚îÄ time-tracking.controller.ts # REST API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
‚îî‚îÄ‚îÄ time-tracking.module.ts    # –ú–æ–¥—É–ª—å NestJS
```

## üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

### 1. TimeEntriesService
**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ (–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è, —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã)
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã: DRAFT ‚Üí SUBMITTED ‚Üí APPROVED/REJECTED
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è–º–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `createTimeEntry()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- `updateTimeEntry()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `submitTimeEntry()` - –ø–æ–¥–∞—á–∞ –Ω–∞ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- `approveTimeEntry()` - —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- `validateAndCalculateDuration()` - —Ä–∞—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏
- `checkTimeOverlap()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π

### 2. TimerService
**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –û—Ç–º–µ–Ω–∞ —Ç–∞–π–º–µ—Ä–∞

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `startTimer()` - –∑–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
- `stopTimer()` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞–ø–∏—Å–∏
- `getTimerStatus()` - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- `cancelTimer()` - –æ—Ç–º–µ–Ω–∞ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

### 3. TimesheetsService
**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–¥–µ–ª—å–Ω—ã—Ö —Ç–∞–±–µ–ª–µ–π
- ‚úÖ –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ Workflow —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–∞–±–µ–ª–µ–π
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `createTimesheet()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–µ–ª—è
- `generateTimeReport()` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤
- `calculateSummary()` - –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## üåê REST API Endpoints

### –ó–∞–ø–∏—Å–∏ –≤—Ä–µ–º–µ–Ω–∏
- `POST /time-tracking/entries` - –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å
- `GET /time-tracking/entries` - –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- `GET /time-tracking/entries/:id` - –ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å—å
- `PUT /time-tracking/entries/:id` - –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
- `DELETE /time-tracking/entries/:id` - –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å
- `POST /time-tracking/entries/:id/submit` - –ü–æ–¥–∞—Ç—å –Ω–∞ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- `POST /time-tracking/entries/:id/approve` - –£—Ç–≤–µ—Ä–¥–∏—Ç—å
- `POST /time-tracking/entries/:id/reject` - –û—Ç–∫–ª–æ–Ω–∏—Ç—å

### –¢–∞–π–º–µ—Ä
- `POST /time-tracking/timer/start` - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä
- `POST /time-tracking/timer/stop` - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä
- `GET /time-tracking/timer/status` - –°—Ç–∞—Ç—É—Å —Ç–∞–π–º–µ—Ä–∞
- `DELETE /time-tracking/timer/cancel` - –û—Ç–º–µ–Ω–∏—Ç—å —Ç–∞–π–º–µ—Ä

### –¢–∞–±–µ–ª–∏
- `POST /time-tracking/timesheets` - –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–µ–ª—å
- `GET /time-tracking/timesheets` - –°–ø–∏—Å–æ–∫ —Ç–∞–±–µ–ª–µ–π
- `GET /time-tracking/timesheets/:id` - –ü–æ–ª—É—á–∏—Ç—å —Ç–∞–±–µ–ª—å
- `POST /time-tracking/timesheets/:id/submit` - –ü–æ–¥–∞—Ç—å —Ç–∞–±–µ–ª—å
- `POST /time-tracking/timesheets/:id/approve` - –£—Ç–≤–µ—Ä–¥–∏—Ç—å —Ç–∞–±–µ–ª—å
- `POST /time-tracking/timesheets/:id/reject` - –û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–±–µ–ª—å

### –û—Ç—á—ë—Ç—ã
- `GET /time-tracking/reports/time` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤

## üîê –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

### –†–æ–ª–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- **Employee** (TIME_TRACKING:LIMITED)
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –≤—Ä–µ–º–µ–Ω–∏
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
  - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–µ–ª–µ–π

- **Manager** (TIME_TRACKING:AUTHORIZED)
  - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Employee
  - –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∏ —Ç–∞–±–µ–ª–µ–π
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π –¥—Ä—É–≥–∏—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

- **Admin** (TIME_TRACKING:AUTHORIZED)
  - –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª—é–±—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
```prisma
model TimeEntry {
  id             String    @id @default(cuid())
  userId         String
  date           DateTime
  startAt        DateTime?
  endAt          DateTime?
  breakMinutes   Int       @default(0)
  durationMinutes Int      @default(0)
  companyId      String?
  status         String    @default("draft")
  source         String    @default("manual")
  notes          String?
  // relationships...
}

model Timesheet {
  id            String   @id @default(cuid())
  userId        String
  weekStartDate DateTime
  weekEndDate   DateTime  # –î–æ–±–∞–≤–ª–µ–Ω–æ
  status        String   @default("submitted")
  totalMinutes  Int      @default(0)
  totalHours    Float    @default(0)  # –î–æ–±–∞–≤–ª–µ–Ω–æ
  // relationships...
}
```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –° –º–æ–¥—É–ª–µ–º Rates & Schedules
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Å—Ç–∞–≤–æ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π

### –° –º–æ–¥—É–ª–µ–º RBAC
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –ø–æ —Ä–æ–ª—è–º
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –∫–æ–º–ø–∞–Ω–∏—è–º –¥–ª—è LIMITED —Ä–æ–ª–µ–π
- ‚úÖ –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º

### –° –º–æ–¥—É–ª–µ–º Users
- ‚úÖ –°–≤—è–∑—å –∑–∞–ø–∏—Å–µ–π —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –æ—Ç—á—ë—Ç–∞—Ö

## üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏

### –î–∞–Ω–Ω—ã–µ –≤ –æ—Ç—á—ë—Ç–∞—Ö
- ‚úÖ –û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
- ‚úÖ –†–∞–∑–±–∏–≤–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚úÖ –†–∞–∑–±–∏–≤–∫–∞ –ø–æ –∫–æ–º–ø–∞–Ω–∏—è–º/–ø—Ä–æ–µ–∫—Ç–∞–º
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –Ω–µ–¥–µ–ª—è–º (—Ç–∞–±–µ–ª–∏)

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- ‚úÖ –ü–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚úÖ –ü–æ –¥–∞—Ç–∞–º (–æ—Ç/–¥–æ)
- ‚úÖ –ü–æ –∫–æ–º–ø–∞–Ω–∏—è–º
- ‚úÖ –ü–æ —Å—Ç–∞—Ç—É—Å–∞–º –∑–∞–ø–∏—Å–µ–π

## üõ°Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—á–∞–ª–∞/–æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–∞–±–æ—á–µ–º—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### Workflow —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ DRAFT ‚Üí SUBMITTED ‚Üí APPROVED/REJECTED
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π

## üìù Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í—Å–µ endpoint'—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å:
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –ü—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ –ö–æ–¥–∞–º–∏ –æ—à–∏–±–æ–∫
- ‚úÖ –°—Ö–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–ú–æ–¥—É–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ API –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ Swagger UI
- ‚úÖ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

–î–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:4001/docs (—Ä–∞–∑–¥–µ–ª "Time Tracking")